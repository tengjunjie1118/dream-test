<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>æ¢¦è§’Â·äº²å¯†å…³ç³»å¥‘åˆåº¦æ·±åº¦è¯„ä¼°</title>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <style>
        /* ========================================= 
           å“åº”å¼è§†è§‰ç³»ç»Ÿ
           ========================================= */
        :root {
            --primary: #F04E6E;       
            --primary-grad: linear-gradient(135deg, #F04E6E 0%, #FF6B95 100%);
            --primary-light: #FFF0F5;
            --bg-page: #FAFAFA;       
            --bg-desktop: #F0F2F5;    
            --card-shadow: 0 8px 24px rgba(240, 78, 110, 0.08);
            --radius-card: 20px;
            --radius-btn: 50px;
            
            --purple-bg: #F3E5F5; 
            --purple-text: #8E24AA;
            --green-bg: #E8F5E9; 
            --green-text: #2E7D32;
            --warn-bg: #FFF3E0; 
            --warn-text: #EF6C00;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body { 
            font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Microsoft YaHei", sans-serif; 
            background: var(--bg-page); 
            color: #333; 
            line-height: 1.6; 
            padding-bottom: 90px; 
            min-height: 100vh;
        }

        .view { display: none; width: 100%; min-height: 100vh; animation: fadeIn 0.4s ease; padding: 20px 15px; margin: 0 auto; }
        .view.active { display: block; }

        @media (min-width: 768px) {
            body { background: var(--bg-desktop); display: flex; flex-direction: column; align-items: center; }
            .view { max-width: 600px; background: #fff; min-height: auto; margin-top: 30px; margin-bottom: 30px; border-radius: 24px; box-shadow: 0 10px 40px rgba(0,0,0,0.1); padding: 40px; }
            .bottom-bar { position: sticky !important; width: 100% !important; border-radius: 0 0 24px 24px; box-shadow: 0 -4px 10px rgba(0,0,0,0.03) !important; }
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .snapshot-mode, .snapshot-mode * { animation: none !important; transition: none !important; transform: none !important; box-shadow: none !important; }
        .snapshot-mode .card { border: 1px solid #eee !important; background: #fff !important; }

        .card { background: #FFFFFF; border-radius: var(--radius-card); padding: 24px; margin-bottom: 16px; box-shadow: var(--card-shadow); border: 1px solid rgba(0,0,0,0.02); }
        .btn { width: 100%; padding: 16px; border-radius: var(--radius-btn); font-size: 16px; font-weight: 700; border: none; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px; transition: transform 0.1s; }
        .btn:active { transform: scale(0.98); }
        .btn-primary { background: var(--primary-grad); color: white; box-shadow: 0 6px 20px rgba(240, 78, 110, 0.3); }
        .btn-outline { background: white; border: 1px solid #ddd; color: #666; }
        
        .section-title { font-size: 18px; font-weight: 800; margin: 35px 0 15px; display: flex; align-items: center; }
        .section-title::before { content: ''; display: inline-block; width: 6px; height: 18px; background: var(--primary); border-radius: 4px; margin-right: 10px; }

        .landing-hero { text-align: center; padding: 40px 0 20px; }
        .hero-title { font-size: 32px; font-weight: 900; color: var(--primary); line-height: 1.2; margin-bottom: 10px; }
        .feature-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin: 30px 0; }
        @media (max-width: 400px) { .feature-grid { grid-template-columns: repeat(2, 1fr); } }
        .feature-item { text-align: center; background: white; padding: 15px 5px; border-radius: 16px; box-shadow: var(--card-shadow); }
        .feature-icon { font-size: 24px; color: var(--primary); margin-bottom: 8px; }
        .feature-text { font-size: 12px; font-weight: bold; color: #555; }

        .mode-card { display: flex; align-items: center; padding: 20px; border: 2px solid transparent; cursor: pointer; position: relative; overflow: hidden; transition: all 0.2s; }
        .mode-card:hover { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(0,0,0,0.05); }
        .mode-card.selected { border-color: var(--primary); background: var(--primary-light); }
        .mode-icon { width: 50px; height: 50px; border-radius: 50%; background: #FCE4EC; color: var(--primary); display: flex; align-items: center; justify-content: center; font-size: 24px; margin-right: 15px; flex-shrink: 0; }
        .mode-tag { position: absolute; top: 0; right: 0; background: var(--primary); color: white; font-size: 10px; padding: 4px 10px; border-bottom-left-radius: 10px; }

        .form-group { margin-bottom: 25px; }
        .form-label { font-size: 15px; font-weight: 700; margin-bottom: 12px; display: block; }
        .radio-group { display: flex; flex-direction: column; gap: 10px; }
        @media (min-width: 768px) { .radio-group { display: grid; grid-template-columns: 1fr 1fr; } }
        .custom-radio { display: flex; align-items: center; padding: 15px; border: 1px solid #eee; border-radius: 12px; cursor: pointer; background: white; transition: all 0.2s; }
        .custom-radio:hover { border-color: #ddd; background: #fafafa; }
        .custom-radio.active { border-color: var(--primary); background: var(--primary-light); color: var(--primary); font-weight: 600; }
        .radio-circle { width: 20px; height: 20px; border: 2px solid #ddd; border-radius: 50%; margin-right: 12px; display: flex; align-items: center; justify-content: center; }
        .custom-radio.active .radio-circle { border-color: var(--primary); }
        .radio-dot { width: 10px; height: 10px; background: var(--primary); border-radius: 50%; display: none; }
        .custom-radio.active .radio-dot { display: block; }
        .custom-select { width: 100%; padding: 15px; border: 1px solid #eee; border-radius: 12px; font-size: 16px; background: white; outline: none; }
        
        /* æ ·å¼ï¼šè¾“å…¥æ¡† */
        .custom-input { width: 100%; padding: 15px; border: 1px solid #eee; border-radius: 12px; font-size: 16px; background: white; outline: none; transition: border 0.2s; }
        .custom-input:focus { border-color: var(--primary); }

        .quiz-header { position: sticky; top: 0; background: inherit; padding-bottom: 10px; z-index: 10; }
        .progress-track { height: 6px; background: #E0E0E0; border-radius: 3px; overflow: hidden; margin-top: 5px; }
        .progress-fill { height: 100%; background: var(--primary); width: 0%; transition: width 0.3s; }
        .dim-badge-card { background: white; padding: 15px; border-radius: 12px; margin: 15px 0; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 10px rgba(0,0,0,0.03); }
        .dim-name { font-weight: 700; color: #333; }
        .dim-progress { background: var(--primary-light); color: var(--primary); font-size: 12px; padding: 4px 10px; border-radius: 20px; font-weight: bold; }
        .question-text { font-size: 18px; font-weight: 700; color: #222; margin: 20px 0 30px; line-height: 1.5; }
        .option-item { display: flex; align-items: center; padding: 18px; background: white; border: 1px solid #eee; border-radius: 12px; margin-bottom: 12px; cursor: pointer; transition: all 0.2s; }
        .option-item:hover { background: #fafafa; }
        .option-item.selected { border-color: var(--primary); background: var(--primary-light); }
        .option-circle { width: 22px; height: 22px; border: 2px solid #ccc; border-radius: 50%; margin-right: 15px; flex-shrink: 0; }
        .option-item.selected .option-circle { border-color: var(--primary); border-width: 6px; }
        .quiz-nav { display: flex; gap: 10px; margin-top: 30px; }

        .answer-grid-container { margin-top: 30px; padding: 20px 0; border-top: 1px dashed #eee; }
        .grid-title { font-size: 12px; color: #999; text-align: center; margin-bottom: 15px; }
        .answer-grid { display: grid; grid-template-columns: repeat(6, 1fr); gap: 8px; }
        @media (min-width: 768px) { .answer-grid { grid-template-columns: repeat(9, 1fr); } }
        .grid-cell { aspect-ratio: 1; display: flex; align-items: center; justify-content: center; background: white; border: 1px solid #eee; border-radius: 8px; font-size: 12px; color: #333; transition: all 0.3s; cursor: default; }
        .grid-cell.active { background: var(--primary); color: white; border-color: var(--primary); font-weight: bold; transform: scale(1.1); box-shadow: 0 4px 10px rgba(240,78,110,0.3); }
        .grid-cell.done { background: #f9f9f9; color: #bbb; border-color: #f0f0f0; }

        .score-card { text-align: center; background: linear-gradient(180deg, #FFFFFF 0%, #FFF5F7 100%); padding-top: 40px; border: 1px solid #FFE4E1; }
        .score-val { font-size: 72px; font-weight: 900; color: var(--primary); line-height: 1; margin: 10px 0; }
        .score-badge { display: inline-block; background: var(--primary); color: white; padding: 6px 20px; border-radius: 20px; font-size: 14px; font-weight: bold; margin-bottom: 25px; }
        
        .list-box { display: flex; gap: 12px; margin-bottom: 15px; align-items: flex-start; }
        .list-icon-bg { width: 32px; height: 32px; background: var(--primary-light); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: var(--primary); flex-shrink: 0; }
        .capsule-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .capsule { background: #F9F9F9; padding: 15px; border-radius: 12px; display: flex; align-items: center; gap: 10px; }
        .capsule-bar { height: 6px; background: #eee; border-radius: 3px; width: 100%; margin-top: 8px; overflow: hidden; }
        .flow-step { background: #FAFAFA; padding: 15px; border-radius: 12px; display: flex; gap: 15px; margin-bottom: 10px; border: 1px solid #eee; }
        .flow-num { width: 24px; height: 24px; border-radius: 50%; border: 2px solid #333; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 12px; flex-shrink: 0; }
        .flow-arrow { text-align: center; color: #ccc; margin: 5px 0 15px; }
        .timeline-item { position: relative; padding-left: 30px; margin-bottom: 30px; }
        .timeline-item::before { content: ''; position: absolute; left: 9px; top: 0; bottom: -30px; width: 2px; background: #FFE4E1; }
        .timeline-item:last-child::before { display: none; }
        .timeline-dot { position: absolute; left: 0; top: 0; width: 20px; height: 20px; background: #FFCDD2; border-radius: 50%; display: flex; align-items: center; justify-content: center; }
        .timeline-dot-inner { width: 10px; height: 10px; background: var(--primary); border-radius: 50%; }

        .bottom-bar { position: fixed; bottom: 0; left: 0; width: 100%; background: rgba(255,255,255,0.95); backdrop-filter: blur(10px); padding: 12px 20px; box-shadow: 0 -4px 20px rgba(0,0,0,0.05); display: flex; gap: 10px; z-index: 100; }
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); z-index: 1000; align-items: center; justify-content: center; backdrop-filter: blur(5px); }
        .modal-content { width: 85%; background: white; border-radius: 24px; overflow: hidden; max-height: 90vh; overflow-y: auto; }
        @media (min-width: 768px) { .modal-content { max-width: 400px; } }
        .alert-box { padding: 30px; text-align: center; }
        .alert-icon { font-size: 40px; color: #FF5252; margin-bottom: 15px; }
        #poster-container { width: 100%; display: flex; flex-direction: column; align-items: center; padding: 20px; }
        #poster-img { width: 100%; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .poster-tip { margin-top: 15px; color: #666; font-size: 14px; display: flex; align-items: center; gap: 8px; }

    </style>
</head>
<body>

    <div id="view-landing" class="view active">
        <div class="landing-hero">
            <div style="font-size: 60px; margin-bottom: 20px;">ğŸ’–</div>
            <div style="font-size: 14px; background: #FFE4E1; color: var(--primary); padding: 4px 12px; border-radius: 20px; display: inline-block; margin-bottom: 15px; font-weight: bold;">åŸºäºå¿ƒç†å­¦ç ”ç©¶çš„ä¸“ä¸šæµ‹è¯„å·¥å…·</div>
            <h1 class="hero-title">æ¢¦è§’Â·å¥‘åˆåº¦<br>æ·±åº¦è¯„ä¼°è®¡ç®—å™¨</h1>
            <p style="color: #666; font-size: 14px; padding: 0 20px;">ä¸“ä¸šçš„äº²å¯†å…³ç³»è¯„ä¼°å·¥å…·ï¼ŒåŸºäº5å¤§æ ¸å¿ƒç»´åº¦å’Œ45ä¸ªå¿ƒç†å­¦é‡è¡¨ï¼Œå¸®åŠ©æ‚¨ç§‘å­¦åœ°äº†è§£è‡ªå·±å’Œæ‹äººçš„å¥‘åˆç¨‹åº¦ã€‚</p>
        </div>

        <div class="card" style="margin-top: 30px;">
            <h3 style="font-size: 16px; margin-bottom: 15px; text-align: center;">ğŸš€ ç«‹å³å¼€å§‹</h3>
            <div style="background: #F5F5F5; border-radius: 12px; padding: 10px; margin-bottom: 15px; display: flex;">
                <input type="text" id="code-input" placeholder="è¯·è¾“å…¥æµ‹è¯„å…‘æ¢ç " style="flex: 1; border: none; background: transparent; padding: 10px; outline: none; text-align: center; font-weight: bold; font-size: 16px; letter-spacing: 2px;">
            </div>
            <button class="btn btn-primary" onclick="verifyCode()">éªŒè¯å¹¶å¼€å§‹ <i class="fas fa-arrow-right"></i></button>
            <p style="text-align: center; font-size: 12px; color: #999; margin-top: 15px;"><i class="fas fa-shield-alt"></i> éšç§ä¿æŠ¤ Â· åŒ¿åæµ‹è¯„ Â· æœ¬åœ°è®¡ç®—</p>
        </div>

        <div class="feature-grid">
            <div class="feature-item"><div class="feature-icon"><i class="fas fa-clock"></i></div><div class="feature-text">10-15<br>åˆ†é’Ÿå®Œæˆ</div></div>
            <div class="feature-item"><div class="feature-icon"><i class="fas fa-check-circle"></i></div><div class="feature-text">5å¤§<br>æ ¸å¿ƒç»´åº¦</div></div>
            <div class="feature-item"><div class="feature-icon"><i class="fas fa-lock"></i></div><div class="feature-text">100%<br>éšç§ä¿æŠ¤</div></div>
            <div class="feature-item"><div class="feature-icon"><i class="fas fa-user-friends"></i></div><div class="feature-text">åŒè§†è§’<br>æ·±åº¦åˆ†æ</div></div>
        </div>
    </div>

    <div id="view-mode" class="view">
        <h2 style="text-align: center; margin: 30px 0 10px;">é€‰æ‹©æµ‹è¯„è§†è§’</h2>
        <p style="text-align: center; color: #666; font-size: 14px; margin-bottom: 40px;">ç›®å‰ä»…æ”¯æŒä¸ªäººè‡ªæµ‹æ¨¡å¼</p>

        <div class="card mode-card" onclick="selectMode('self')">
            <div class="mode-tag">âœ¨ æ¨è</div>
            <div class="mode-icon"><i class="fas fa-user"></i></div>
            <div>
                <h3 style="font-size: 18px; margin-bottom: 5px;">ç»™è‡ªå·±æµ‹</h3>
                <p style="font-size: 12px; color: #888;">æ·±å…¥äº†è§£è‡ªå·±åœ¨å…³ç³»ä¸­çš„è¡¨ç°</p>
                <div style="display: flex; gap: 5px; margin-top: 10px; flex-wrap: wrap;">
                    <span style="font-size: 10px; color: var(--green-text); background: var(--green-bg); padding: 2px 6px; border-radius: 4px;"><i class="fas fa-check"></i> æƒ…æ„Ÿå…±æŒ¯é‡è¡¨</span>
                    <span style="font-size: 10px; color: var(--green-text); background: var(--green-bg); padding: 2px 6px; border-radius: 4px;"><i class="fas fa-check"></i> æ²Ÿé€šæ·±åº¦é‡è¡¨</span>
                </div>
            </div>
        </div>
    </div>

    <div id="view-consent" class="view">
        <h2 style="text-align: center; color: var(--primary); margin: 20px 0;">ğŸ“„ çŸ¥æƒ…åŒæ„ä¹¦</h2>
        <div class="card">
            <div style="margin-bottom: 20px;">
                <h4 style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;"><i class="fas fa-bullseye" style="color: var(--primary);"></i> è¯„ä¼°ç›®çš„</h4>
                <p style="font-size: 13px; color: #555; text-align: justify;">æœ¬è¯„ä¼°æ—¨åœ¨å¸®åŠ©æ‚¨å…¨é¢äº†è§£æ‹çˆ±å…³ç³»ä¸­çš„å¥‘åˆåº¦ï¼ŒåŒ…æ‹¬æƒ…æ„Ÿå…±æŒ¯ã€æ—¥å¸¸ä¹ æƒ¯ã€æ²Ÿé€šæ¨¡å¼ç­‰äº”ä¸ªç»´åº¦ã€‚è¿™æ˜¯ä¸€ä¸ªè‡ªæˆ‘æ¢ç´¢å·¥å…·ã€‚</p>
            </div>
            <div style="margin-bottom: 20px;">
                <h4 style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;"><i class="fas fa-lock" style="color: var(--primary);"></i> éšç§ä¿æŠ¤</h4>
                <p style="font-size: 13px; color: #555; text-align: justify;">æ‚¨çš„æ‰€æœ‰ç­”æ¡ˆå°†<strong>å®Œå…¨åŒ¿å</strong>ï¼Œä»…åœ¨æ‚¨çš„è®¾å¤‡æœ¬åœ°å­˜å‚¨ï¼Œ<strong>ä¸ä¼šä¸Šä¼ åˆ°ä»»ä½•æœåŠ¡å™¨</strong>ã€‚æ‚¨æ‹¥æœ‰å®Œå…¨çš„æ•°æ®æ§åˆ¶æƒã€‚</p>
            </div>
            <div style="background: var(--warn-bg); padding: 15px; border-radius: 12px; display: flex; gap: 10px;">
                <i class="fas fa-exclamation-triangle" style="color: var(--warn-text); font-size: 20px;"></i>
                <p style="font-size: 12px; color: #BF360C;"><strong>é‡è¦æé†’ï¼š</strong>å¦‚æœç›®å‰æ­£åœ¨ç»å†ä¸¥é‡çš„å…³ç³»æš´åŠ›æˆ–æç«¯æ§åˆ¶ï¼Œè¯·ç«‹å³å¯»æ±‚ä¸“ä¸šå¸®åŠ©ã€‚æœ¬è¯„ä¼°ä¸é€‚åˆå±æœºçŠ¶æ€ã€‚</p>
            </div>
        </div>
        <div class="card" style="display: flex; align-items: center; gap: 15px; border: 2px solid var(--primary-light);">
            <div onclick="toggleAgree()" id="agree-radio" style="width: 24px; height: 24px; border: 2px solid #ccc; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer;">
                <div id="agree-dot" style="width: 12px; height: 12px; background: var(--primary); border-radius: 50%; display: none;"></div>
            </div>
            <div style="font-size: 13px; color: #333;">æˆ‘å·²ä»”ç»†é˜…è¯»å¹¶ç†è§£ä¸Šè¿°å†…å®¹ï¼Œè‡ªæ„¿å‚ä¸æœ¬æ¬¡è¯„ä¼°ã€‚</div>
        </div>
        <div style="display: flex; gap: 15px;">
            <button class="btn btn-outline" onclick="location.reload()">æˆ‘ä¸åŒæ„</button>
            <button class="btn btn-primary" onclick="confirmConsent()">æˆ‘åŒæ„å¹¶å¼€å§‹</button>
        </div>
    </div>

    <div id="view-info" class="view">
        <h2 style="text-align: center; color: var(--primary); margin-bottom: 30px;">æ‹äººåŸºæœ¬ä¿¡æ¯</h2>
        
        <div class="card">
            <div class="form-group">
                <label class="form-label">ğŸ‚ TAçš„å¹´é¾„æ®µ</label>
                <div class="radio-group" id="age-group">
                    <div class="custom-radio" onclick="selectRadio('age', '18-24', this)"><div class="radio-circle"><div class="radio-dot"></div></div>18-24å²</div>
                    <div class="custom-radio" onclick="selectRadio('age', '25-29', this)"><div class="radio-circle"><div class="radio-dot"></div></div>25-29å²</div>
                    <div class="custom-radio" onclick="selectRadio('age', '30-39', this)"><div class="radio-circle"><div class="radio-dot"></div></div>30-39å²</div>
                    <div class="custom-radio" onclick="selectRadio('age', '40+', this)"><div class="radio-circle"><div class="radio-dot"></div></div>40å²ä»¥ä¸Š</div>
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">âš§ TAçš„æ€§åˆ«</label>
                <div class="radio-group" id="gender-group">
                    <div class="custom-radio" onclick="selectRadio('gender', 'male', this)"><div class="radio-circle"><div class="radio-dot"></div></div>ç”·æ€§</div>
                    <div class="custom-radio" onclick="selectRadio('gender', 'female', this)"><div class="radio-circle"><div class="radio-dot"></div></div>å¥³æ€§</div>
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">ğŸŒŸ TAçš„æ˜Ÿåº§</label>
                <select id="zodiac-select" class="custom-select">
                    <option value="">è¯·é€‰æ‹©æ˜Ÿåº§</option>
                    <option value="Aries">ç™½ç¾Šåº§</option><option value="Taurus">é‡‘ç‰›åº§</option><option value="Gemini">åŒå­åº§</option>
                    <option value="Cancer">å·¨èŸ¹åº§</option><option value="Leo">ç‹®å­åº§</option><option value="Virgo">å¤„å¥³åº§</option>
                    <option value="Libra">å¤©ç§¤åº§</option><option value="Scorpio">å¤©èåº§</option><option value="Sagittarius">å°„æ‰‹åº§</option>
                    <option value="Capricorn">æ‘©ç¾¯åº§</option><option value="Aquarius">æ°´ç“¶åº§</option><option value="Pisces">åŒé±¼åº§</option>
                </select>
            </div>

            <div class="form-group">
                <label class="form-label">ğŸ“ Taçš„åå­—/æ˜µç§°</label>
                <input type="text" id="partner-name-input" class="custom-input" placeholder="è¯·è¾“å…¥Taçš„åå­—ï¼ˆç”¨äºç”ŸæˆæŠ¥å‘Šï¼‰">
            </div>
            
            <button class="btn btn-primary" onclick="submitInfo()">ä¸‹ä¸€æ­¥ï¼Œå¼€å§‹ç­”é¢˜</button>
        </div>
    </div>

    <div id="view-quiz" class="view">
        <div class="quiz-header">
            <div class="progress-meta"><span>è¿›åº¦</span><span><span id="current-q">1</span> / 45</span></div>
            <div class="progress-track"><div class="progress-fill" id="progress-bar"></div></div>
        </div>
        <div class="dim-badge-card">
            <div class="dim-name" id="dim-name-display">åŠ è½½ä¸­...</div>
            <div class="dim-progress" id="dim-progress-display">ç¬¬ 1/9 é¢˜</div>
        </div>
        <div class="question-text" id="q-text">é¢˜ç›®åŠ è½½ä¸­...</div>
        <div id="options-box"></div>
        <div class="quiz-nav">
            <button class="btn btn-outline" onclick="prevQuestion()" id="btn-prev" style="width: 30%;">ä¸Šä¸€é¢˜</button>
            <button class="btn btn-primary" onclick="nextQuestion()" id="btn-next" style="width: 70%;" disabled>è¯·é€‰æ‹©é€‰é¡¹</button>
        </div>
        <div class="answer-grid-container">
            <div class="grid-title">ç­”é¢˜è¿›åº¦æ¦‚è§ˆ</div>
            <div class="answer-grid" id="answer-grid-box"></div>
        </div>
    </div>

    <div id="view-result" class="view">
        <div class="card score-card">
            <div id="res-names" style="font-size: 20px; font-weight: 800; color: #333; margin-bottom: 5px;"></div>
            
            <div style="font-size: 12px; color: #888; letter-spacing: 1px; text-transform: uppercase; margin-bottom: 5px;">æ¢¦è§’Â·å¥‘åˆåº¦æŒ‡æ•° (RPI)</div>
            <div class="score-val" id="res-score">0</div>
            <div class="score-badge" id="res-level">è®¡ç®—ä¸­...</div>
            <div style="font-size: 13px; color: #555; padding: 0 10px; line-height: 1.6; margin-top: 10px;" id="res-summary">...</div>
            <div style="height: 8px; background: linear-gradient(90deg, #FFCDD2, #F04E6E, #B71C1C); border-radius: 4px; position: relative; margin: 30px 10px 10px;">
                <div id="res-slider" style="width: 20px; height: 20px; background: white; border: 4px solid var(--primary); border-radius: 50%; position: absolute; top: 50%; left: 0%; transform: translate(-50%, -50%); box-shadow: 0 2px 5px rgba(0,0,0,0.2); transition: left 1s;"></div>
            </div>
            <div style="display: flex; justify-content: space-between; font-size: 10px; color: #999;"><span>ç–ç¦»(0)</span><span>ç£¨åˆ(50)</span><span>åŒç”Ÿ(100)</span></div>
        </div>

        <div class="section-title">ğŸ’¡ ç»™æ‚¨çš„å»ºè®®</div>
        <div class="card" id="box-suggestions"></div>

        <div class="section-title">ğŸ“Š äº”ç»´åº¦åˆ†æ</div>
        <div class="card"><div class="capsule-grid" id="box-dimensions"></div></div>

        <div class="section-title">ğŸ“‰ å¯è§†åŒ–åˆ†æ</div>
        <div class="card">
            <h4 style="text-align: center; margin-bottom: 15px;">å¥‘åˆåº¦é›·è¾¾å›¾</h4>
            <canvas id="radarChart"></canvas>
            <p style="text-align: center; font-size: 12px; color: #999; margin-top: 15px;">Tåˆ†æ•°èŒƒå›´: 20-80</p>
        </div>

        <div class="section-title">âœ¨ å¥‘åˆäººæ ¼ç±»å‹</div>
        <div class="card" style="text-align: center;" id="box-personality"></div>

        <div class="section-title">ğŸ”„ æ¨¡å¼åˆ†æ</div>
        <div class="card" id="box-patterns"></div>

        <div class="section-title">ğŸ”€ å½’å› è·¯å¾„åˆ†æ</div>
        <div class="card" id="box-flow"></div>

        <div class="section-title">ğŸ©º å¿ƒç†å­¦ä¸“å®¶å»ºè®®</div>
        <div class="card" id="box-expert"></div>

        <div class="section-title">ğŸ›¡ï¸ å…³ç³»å®‰å…¨æ„Ÿå»ºç«‹</div>
        <div class="card" id="box-security"></div>

        <div class="section-title" style="color: var(--purple-text);">ğŸ”® æ˜Ÿåº§æ€§æ ¼å‚è€ƒ <span style="font-size: 10px; background: #eee; padding: 2px 5px; border-radius: 4px; margin-left: 5px; color: #666;">ä»…ä¾›å¨±ä¹</span></div>
        <div class="card" style="background: var(--purple-bg); border: 1px solid #E1BEE7;" id="box-zodiac"></div>

        <div class="section-title">â¤ï¸ å…³ç³»å¥åº·åº¦è¯„ä¼°</div>
        <div class="card" style="background: #F1F8E9;">
            <div class="capsule-grid" id="box-health"></div>
            <div style="background: rgba(255,255,255,0.6); padding: 10px; border-radius: 8px; margin-top: 15px; font-size: 12px; color: #33691E;" id="text-health-summary"></div>
        </div>

        <div class="section-title">ğŸ’¬ æœ‰æ•ˆæ²Ÿé€šæŠ€å·§æŒ‡å—</div>
        <div class="card">
            <div class="list-box">
                <div class="list-icon-bg" style="background: #E8F5E9; color: #2E7D32;">1</div>
                <div><h4 style="font-size: 14px;">"æˆ‘"å­—å¥è¡¨è¾¾</h4><p style="font-size: 12px; color: #555;">å¤šè¯´"æˆ‘æ„Ÿåˆ°..."ï¼Œå°‘è¯´"ä½ æ€»æ˜¯..."ï¼Œå‡å°‘æŒ‡è´£æ„Ÿã€‚</p></div>
            </div>
            <div class="list-box">
                <div class="list-icon-bg" style="background: #E8F5E9; color: #2E7D32;">2</div>
                <div><h4 style="font-size: 14px;">ä¸‰æ˜æ²»æ³•åˆ™</h4><p style="font-size: 12px; color: #555;">è‚¯å®š(èµç¾) -> å»ºè®®(éœ€æ±‚) -> è‚¯å®š(é¼“åŠ±)ã€‚</p></div>
            </div>
        </div>

        <div class="section-title">ğŸ“… 30å¤©è‡ªæˆ‘æˆé•¿è®¡åˆ’</div>
        <div class="card" id="box-timeline" style="padding-left: 15px;"></div>

        <div class="section-title">ğŸ“š æ¨èå­¦ä¹ èµ„æº</div>
        <div class="card">
            <div style="display: flex; gap: 10px; overflow-x: auto; padding-bottom: 5px;">
                <div style="min-width: 120px; background: #F5F5F5; padding: 10px; border-radius: 8px; font-size: 12px;"><i class="fas fa-book" style="color: var(--primary);"></i> <strong>éæš´åŠ›æ²Ÿé€š</strong><br><span style="color:#999">é©¬æ­‡å°”Â·å¢æ£®å ¡</span></div>
                <div style="min-width: 120px; background: #F5F5F5; padding: 10px; border-radius: 8px; font-size: 12px;"><i class="fas fa-book" style="color: var(--primary);"></i> <strong>äº²å¯†å…³ç³»</strong><br><span style="color:#999">ç½—å…°Â·ç±³å‹’</span></div>
                <div style="min-width: 120px; background: #F5F5F5; padding: 10px; border-radius: 8px; font-size: 12px;"><i class="fas fa-book" style="color: var(--primary);"></i> <strong>çˆ±çš„äº”ç§è¯­è¨€</strong><br><span style="color:#999">ç›–ç‘Â·æŸ¥æ™®æ›¼</span></div>
            </div>
        </div>

        <div style="padding: 0 20px; font-size: 10px; color: #ccc; display: flex; justify-content: space-between; margin-top: 30px;">
            <span>Session: <span id="session-id">...</span></span>
            <span id="finish-time">...</span>
        </div>

        <div style="height: 80px;"></div>

        <div class="bottom-bar">
            <button class="btn btn-outline" onclick="location.reload()" style="flex: 1;"><i class="fas fa-redo"></i> é‡æµ‹</button>
            <button class="btn btn-primary" onclick="generatePoster()" style="flex: 2;"><i class="fas fa-share-alt"></i> ç”Ÿæˆæµ·æŠ¥</button>
        </div>
    </div>

    <div class="modal" id="share-modal" onclick="if(event.target.id==='share-modal') closeModal('share-modal')">
        <div class="modal-content">
            <div id="poster-container">
                <div id="poster-loading" style="padding: 20px; color: #666;"><i class="fas fa-spinner fa-spin"></i> æ­£åœ¨ç”Ÿæˆå›¾ç‰‡...</div>
                <img id="poster-img" src="" alt="ç»“æœæµ·æŠ¥" style="display:none;">
                <div class="poster-tip" id="poster-tip" style="display:none;"><i class="fas fa-fingerprint"></i> é•¿æŒ‰ä¸Šæ–¹å›¾ç‰‡ä¿å­˜åˆ°ç›¸å†Œ</div>
            </div>
            <div style="padding: 10px 20px 20px;"><button class="btn btn-outline" onclick="closeModal('share-modal')" style="font-size: 14px; padding: 10px;">å…³é—­</button></div>
        </div>
    </div>

    <div class="modal" id="alert-modal">
        <div class="modal-content" style="width: 70%; max-width: 300px;">
            <div class="alert-box">
                <div class="alert-icon"><i class="fas fa-exclamation-circle"></i></div>
                <div style="font-size: 16px; color: #333; margin-bottom: 20px;" id="alert-msg">æç¤ºä¿¡æ¯</div>
                <button class="btn btn-primary" onclick="closeModal('alert-modal')">æˆ‘çŸ¥é“äº†</button>
            </div>
        </div>
    </div>

    <script src="data.js"></script>
</body>
</html>